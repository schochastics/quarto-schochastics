{
  "hash": "bcce0d17d106d38b31c6993e38c9fe3e",
  "result": {
    "markdown": "---\nauthor: David Schoch\ndate: \"2017-05-09\"\ndescription: Implements methods for centrality related analyses of networks. \n    While the package includes the possibility to build more than 20 indices, \n    its main focus lies on index-free assessment of centrality via partial \n    rankings obtained by neighborhood-inclusion or positional dominance. These \n    partial rankings can be analyzed with different methods, including \n    probabilistic methods like computing expected node ranks and relative \n    rank probabilitie.\nsubtitle: An R package for network centrality\ntitle: netrankr\nimage: featured-hex.png\ntitle-block-style: none\ntoc: true\npriority: 2\n---\n\n\n<button type=\"button\" class=\"btn btn-outline-success\"><a href=\"https://github.com/schochastics/netrankr\">GITHUB</a></button>\n<button type=\"button\" class=\"btn btn-outline-success\"><a href=\"http://netrankr.schochastics.net/\">PKGDOWN</a></button>\n\n\n\n\n\n\n# Overview \n\nThe literature is flooded with centrality indices and new ones are introduced \non a regular basis. Although there exist several theoretical and empirical guidelines \non when to use certain indices, there still exists plenty of ambiguity in the concept \nof network centrality. To date, network centrality is nothing more than applying indices\nto a network.\n\nThe only degree of freedom is the choice of index. The package comes with an Rstudio addin (`index_builder()`),\nwhich allows to build or choose from more than 20 different indices. Blindly (ab)using\nthis function is highly discouraged!\n\nThe `netrankr` package is based on the idea that centrality is more than a \nconglomeration of indices. Decomposing them in a series of microsteps offers \nthe possibility to gradually add ideas about centrality, without succumbing to\ntrial-and-error approaches. Further, it allows for alternative assessment methods\nwhich can be more general than the index-driven approach.\n\nThe new approach is centered around the concept of *positions*, which are defined as \nthe relations and potential attributes of a node in a network. The aggregation\nof the relations leads to the definition of indices. However, positions can also\nbe compared via *positional dominance*, leading to partial centrality rankings and\nthe option to calculate probabilistic centrality rankings.\n\nFor a more detailed theoretical background, consult the [Literature](#literature) \nat the end of this page.\n\n________________________________________________________________________________\n\n## Installation\n\nTo install from CRAN: \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n install.packages(\"netrankr\")\n```\n:::\n\n\nTo install the developer version from github:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#install.packages(\"devtools\")\ndevtools::install_github(\"schochastics/netrankr\")\n```\n:::\n\n\n________________________________________________________________________________\n\n## Simple Example\n\nThis example briefly explains some of the functionality of the package and the \ndifference to an index driven approach. For a more realistic application see \nthe use case vignette. \n\nWe work with the following small graph.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(igraph)\nlibrary(netrankr)\ng <- graph.empty(n = 11,directed = FALSE)\ng <- add_edges(g,c(1,11,2,4,3,5,3,11,4,8,5,9,5,11,6,7,6,8,\n                    6,10,6,11,7,9,7,10,7,11,8,9,8,10,9,10))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](index_files/figure-html/dbces_neutral-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\nSay we are interested in the most central node of the graph and simply compute some \nstandard centrality scores with the `igraph` package. Defining centrality indices\nin the `netrankr` package is explained in the centrality indices vignette.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncent_scores <- data.frame(\n   degree = degree(g),\n   betweenness = round(betweenness(g),4),\n   closeness = round(closeness(g),4),\n   eigenvector = round(eigen_centrality(g)$vector,4),\n   subgraph = round(subgraph_centrality(g),4))\n# What are the most central nodes for each index?\napply(cent_scores,2,which.max)\n#>      degree betweenness   closeness eigenvector    subgraph \n#>          11           8           6           7          10\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](index_files/figure-html/dbces_color-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\nAs you can see, each index assigns the highest value to a different vertex.\n\nA more general assessment starts by calculating the neighborhood inclusion preorder.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nP <- neighborhood_inclusion(g)\nP\n#>    1 2 3 4 5 6 7 8 9 10 11\n#> 1  0 0 1 0 1 1 1 0 0  0  1\n#> 2  0 0 0 1 0 0 0 1 0  0  0\n#> 3  0 0 0 0 1 0 0 0 0  0  1\n#> 4  0 0 0 0 0 0 0 0 0  0  0\n#> 5  0 0 0 0 0 0 0 0 0  0  0\n#> 6  0 0 0 0 0 0 0 0 0  0  0\n#> 7  0 0 0 0 0 0 0 0 0  0  0\n#> 8  0 0 0 0 0 0 0 0 0  0  0\n#> 9  0 0 0 0 0 0 0 0 0  0  0\n#> 10 0 0 0 0 0 0 0 0 0  0  0\n#> 11 0 0 0 0 0 0 0 0 0  0  0\n```\n:::\n\n[Schoch & Brandes (2016)](https://doi.org/10.1017/S0956792516000401) showed that\n$N(u) \\subseteq N[v]$ (i.e. `P[u,v]=1`) implies $c(u) \\leq c(v)$ for \ncentrality indices $c$, which are defined via specific path algebras. These include\nmany of the well-known measures like closeness (and variants), betweenness (and variants)\nas well as many walk-based indices (eigenvector and subgraph centrality, total communicability,...).\n\nNeighborhood-inclusion defines a partial ranking on the set of nodes. Each ranking \nthat is in accordance with this partial ranking yields a proper centrality ranking.\nEach of these ranking can thus potentially be the outcome of a centrality index.  \n\nUsing rank intervals, we can examine the minimal and maximal possible rank of each node.\nThe bigger the intervals are, the more freedom exists for indices to rank nodes differently.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot(rank_intervals(P),cent_scores = cent_scores,ties.method=\"average\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/partial-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\nThe potential ranks of nodes are not uniformly distributed in the intervals. To get\nthe exact probabilities, the function `exact_rank_prob()` can be used.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nres <- exact_rank_prob(P)\nres\n#> Number of possible centrality rankings:  739200 \n#> Equivalence Classes (max. possible): 11 (11)\n#> - - - - - - - - - - \n#> Rank Probabilities (rows:nodes/cols:ranks)\n#>            1         2         3         4         5         6         7\n#> 1  0.5454545 0.2727273 0.1212121 0.0454545 0.0129870 0.0021645 0.0000000\n#> 2  0.2727273 0.2181818 0.1696970 0.1272727 0.0909091 0.0606061 0.0363636\n#> 3  0.0000000 0.1636364 0.2181818 0.2090909 0.1688312 0.1190476 0.0727273\n#> 4  0.0000000 0.0272727 0.0515152 0.0727273 0.0909091 0.1060606 0.1181818\n#> 5  0.0000000 0.0000000 0.0181818 0.0454545 0.0753247 0.1034632 0.1272727\n#> 6  0.0000000 0.0545455 0.0848485 0.1000000 0.1064935 0.1086580 0.1090909\n#> 7  0.0000000 0.0545455 0.0848485 0.1000000 0.1064935 0.1086580 0.1090909\n#> 8  0.0000000 0.0272727 0.0515152 0.0727273 0.0909091 0.1060606 0.1181818\n#> 9  0.0909091 0.0909091 0.0909091 0.0909091 0.0909091 0.0909091 0.0909091\n#> 10 0.0909091 0.0909091 0.0909091 0.0909091 0.0909091 0.0909091 0.0909091\n#> 11 0.0000000 0.0000000 0.0181818 0.0454545 0.0753247 0.1034632 0.1272727\n#>            8          9        10        11\n#> 1  0.0000000 0.00000000 0.0000000 0.0000000\n#> 2  0.0181818 0.00606061 0.0000000 0.0000000\n#> 3  0.0363636 0.01212121 0.0000000 0.0000000\n#> 4  0.1272727 0.13333333 0.1363636 0.1363636\n#> 5  0.1454545 0.15757576 0.1636364 0.1636364\n#> 6  0.1090909 0.10909091 0.1090909 0.1090909\n#> 7  0.1090909 0.10909091 0.1090909 0.1090909\n#> 8  0.1272727 0.13333333 0.1363636 0.1363636\n#> 9  0.0909091 0.09090909 0.0909091 0.0909091\n#> 10 0.0909091 0.09090909 0.0909091 0.0909091\n#> 11 0.1454545 0.15757576 0.1636364 0.1636364\n#> - - - - - - - - - - \n#> Relative Rank Probabilities (row ranked lower than col)\n#>           1         2        3        4        5        6        7        8\n#> 1  0.000000 0.6666667 1.000000 0.952381 1.000000 1.000000 1.000000 0.952381\n#> 2  0.333333 0.0000000 0.666667 1.000000 0.916667 0.833333 0.833333 1.000000\n#> 3  0.000000 0.3333333 0.000000 0.797619 1.000000 0.750000 0.750000 0.797619\n#> 4  0.047619 0.0000000 0.202381 0.000000 0.559524 0.440476 0.440476 0.500000\n#> 5  0.000000 0.0833333 0.000000 0.440476 0.000000 0.375000 0.375000 0.440476\n#> 6  0.000000 0.1666667 0.250000 0.559524 0.625000 0.000000 0.500000 0.559524\n#> 7  0.000000 0.1666667 0.250000 0.559524 0.625000 0.500000 0.000000 0.559524\n#> 8  0.047619 0.0000000 0.202381 0.500000 0.559524 0.440476 0.440476 0.000000\n#> 9  0.142857 0.2500000 0.357143 0.625000 0.678571 0.571429 0.571429 0.625000\n#> 10 0.142857 0.2500000 0.357143 0.625000 0.678571 0.571429 0.571429 0.625000\n#> 11 0.000000 0.0833333 0.000000 0.440476 0.500000 0.375000 0.375000 0.440476\n#>           9       10       11\n#> 1  0.857143 0.857143 1.000000\n#> 2  0.750000 0.750000 0.916667\n#> 3  0.642857 0.642857 1.000000\n#> 4  0.375000 0.375000 0.559524\n#> 5  0.321429 0.321429 0.500000\n#> 6  0.428571 0.428571 0.625000\n#> 7  0.428571 0.428571 0.625000\n#> 8  0.375000 0.375000 0.559524\n#> 9  0.000000 0.500000 0.678571\n#> 10 0.500000 0.000000 0.678571\n#> 11 0.321429 0.321429 0.000000\n#> - - - - - - - - - - \n#> Expected Ranks (higher values are better)\n#>       1       2       3       4       5       6       7       8       9      10 \n#> 1.71429 3.00000 4.28571 7.50000 8.14286 6.85714 6.85714 7.50000 6.00000 6.00000 \n#>      11 \n#> 8.14286 \n#> - - - - - - - - - - \n#> SD of Rank Probabilities\n#>        1        2        3        4        5        6        7        8 \n#> 0.958315 1.897367 1.724967 2.539685 2.159932 2.721794 2.721794 2.539685 \n#>        9       10       11 \n#> 3.162278 3.162278 2.159932 \n#> - - - - - - - - - -\n```\n:::\n\nFor the graph `g` we can therefore come up with\n739,200 indices that would rank the nodes differently.  \n\n`rank.prob` contains the probabilities for each node to occupy a certain rank. \nFor instance, the probability for each node to be the most central one is as follows.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nround(res$rank.prob[ ,11],2)\n#>    1    2    3    4    5    6    7    8    9   10   11 \n#> 0.00 0.00 0.00 0.14 0.16 0.11 0.11 0.14 0.09 0.09 0.16\n```\n:::\n\n\n`relative.rank` contains the relative rank probabilities. An entry `relative.rank[u,v]`\nindicates how likely it is that `v` is more central than `u`.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# How likely is it, that 6 is more central than 3?\nround(res$relative.rank[3,6],2)\n#> [1] 0.75\n```\n:::\n\n\n`expected.ranks` contains the expected centrality ranks for all nodes. They are \nderived on the basis of `rank.prob`.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nround(res$expected.rank,2)\n#>    1    2    3    4    5    6    7    8    9   10   11 \n#> 1.71 3.00 4.29 7.50 8.14 6.86 6.86 7.50 6.00 6.00 8.14\n```\n:::\n\nThe higher the value, the more central a node is expected to be.\n\n**Note**: The set of rankings grows exponentially in the number of nodes and the exact \ncalculation becomes infeasible quite quickly and approximations need to be used.\nCheck the benchmark results for guidelines.\n\n________________________________________________________________________________\n\n## Theoretical Background {#literature}\n\n`netrankr` is based on a series of papers that appeared in recent years. If you \nwant to learn more about the theoretical background of the package, \nconsult the following literature:\n\n> Schoch, David. (2018). Centrality without Indices: Partial rankings and rank\nProbabilities in networks. *Social Networks*, **54**, 50-60.([link](https://doi.org/10.1016/j.socnet.2017.12.003))\n\n> Schoch, David & Valente, Thomas W., & Brandes, Ulrik. (2017). Correlations among centrality indices\nand a class of uniquely ranked graphs. *Social Networks*, **50**, 46-54.([link](https://doi.org/10.1016/j.socnet.2017.03.010))\n\n> Schoch, David & Brandes, Ulrik. (2016). Re-conceptualizing centrality in social networks.\n*European Journal of Appplied Mathematics*, **27**(6), 971–985.\n([link](https://doi.org/10.1017/S0956792516000401))\n\n> Brandes, Ulrik. (2016). Network Positions.\n*Methodological Innovations*, **9**, 2059799116630650.\n([link](https://dx.doi.org/10.1177/2059799116630650))",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}