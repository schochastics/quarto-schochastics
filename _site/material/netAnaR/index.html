<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.28">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Schoch">
<meta name="dcterms.date" content="2022-01-09">
<meta name="description" content="Tutorial for Network Analysis in R">

<title>schochastics - Basic Network Analysis in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../../static/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<link rel="stylesheet" href="../../academicons.css">
<meta name="twitter:title" content="schochastics - Basic Network Analysis in R">
<meta name="twitter:description" content="Tutorial for Network Analysis in R">
<meta name="twitter:image" content="https://mr.schochastics.net/static/img/avatar.png">
<meta name="twitter:creator" content="@schochastics">
<meta name="twitter:card" content="summary">
<meta name="twitter:image-height" content="2500">
<meta name="twitter:image-width" content="2500">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <img src="../../static/logo.png" alt="">
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../publications/index.html">Publications</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="http://blog.schochastics.net">Blog</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../project/index.html">Projects</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../material/index.html">Material</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about/index.html">About me</a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#shortcuts" id="toc-shortcuts" class="nav-link active" data-scroll-target="#shortcuts">Shortcuts</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#required-libraries" id="toc-required-libraries" class="nav-link" data-scroll-target="#required-libraries">Required libraries</a></li>
  <li><a href="#which-package-to-choose" id="toc-which-package-to-choose" class="nav-link" data-scroll-target="#which-package-to-choose">Which package to choose?</a></li>
  <li><a href="#basic-network-notations" id="toc-basic-network-notations" class="nav-link" data-scroll-target="#basic-network-notations">Basic network notations</a></li>
  <li><a href="#descriptives-and-more-notations" id="toc-descriptives-and-more-notations" class="nav-link" data-scroll-target="#descriptives-and-more-notations">Descriptives and more notations</a>
  <ul class="collapse">
  <li><a href="#use-case-triad-census" id="toc-use-case-triad-census" class="nav-link" data-scroll-target="#use-case-triad-census">Use case: triad census</a></li>
  </ul></li>
  <li><a href="#centrality" id="toc-centrality" class="nav-link" data-scroll-target="#centrality">Centrality</a>
  <ul class="collapse">
  <li><a href="#use-case-florentine-families" id="toc-use-case-florentine-families" class="nav-link" data-scroll-target="#use-case-florentine-families">Use case: Florentine Families</a></li>
  <li><a href="#additional-material" id="toc-additional-material" class="nav-link" data-scroll-target="#additional-material">Additional Material</a></li>
  </ul></li>
  <li><a href="#cliques-and-clustering" id="toc-cliques-and-clustering" class="nav-link" data-scroll-target="#cliques-and-clustering">Cliques and Clustering</a></li>
  <li><a href="#blockmodeling" id="toc-blockmodeling" class="nav-link" data-scroll-target="#blockmodeling">Blockmodeling</a></li>
  <li><a href="#core-periphery-structures" id="toc-core-periphery-structures" class="nav-link" data-scroll-target="#core-periphery-structures">Core-Periphery structures</a></li>
  <li><a href="#i-want-to-learn-about" id="toc-i-want-to-learn-about" class="nav-link" data-scroll-target="#i-want-to-learn-about">I want to learn about …</a>
  <ul class="collapse">
  <li><a href="#two-mode-networks" id="toc-two-mode-networks" class="nav-link" data-scroll-target="#two-mode-networks">… two mode networks</a></li>
  <li><a href="#signed-networks" id="toc-signed-networks" class="nav-link" data-scroll-target="#signed-networks">… signed networks</a></li>
  <li><a href="#ego-networks" id="toc-ego-networks" class="nav-link" data-scroll-target="#ego-networks">… ego networks</a></li>
  <li><a href="#multilevel-networks" id="toc-multilevel-networks" class="nav-link" data-scroll-target="#multilevel-networks">… multilevel networks</a></li>
  <li><a href="#multigraphs" id="toc-multigraphs" class="nav-link" data-scroll-target="#multigraphs">… multigraphs</a></li>
  <li><a href="#something-else" id="toc-something-else" class="nav-link" data-scroll-target="#something-else">… something else</a></li>
  </ul></li>
  <li><a href="#loading-network-data-into-r" id="toc-loading-network-data-into-r" class="nav-link" data-scroll-target="#loading-network-data-into-r">Loading network data into R</a></li>
  <li><a href="#what-is-missing" id="toc-what-is-missing" class="nav-link" data-scroll-target="#what-is-missing">What is missing?</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading">Further Reading</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header">
<h1 class="title display-7">Basic Network Analysis in R</h1>
<p class="subtitle lead">using igraph and related packages</p>

<p class="author">David Schoch</p>

<p class="date">2022-01-09</p>
</header>

<p>(last update 2022-08-10)</p>
<section id="shortcuts" class="level1">
<h1>Shortcuts</h1>
<p>Interested in specific topics? Here are some shortcuts</p>
<p><a href="#basic-network-notations">Basic network notations</a><br>
<a href="#descriptives-and-more-notations">Descriptives and more notations</a><br>
<a href="#use-case-triad-census">Use Case: Triad Census</a></p>
<p>Concepts - <a href="#centrality">Centrality</a> (<a href="#use-case-florentine-families">Use Case</a>)<br>
- <a href="#cliques-and-clustering">Cliques and Clustering</a> - <a href="#blockmodeling">Blockmodeling</a> - <a href="#core-periphery-structures">Core-periphery</a></p>
<p>Special types of networks - <a href="#-two-mode-networks">two mode networks</a> - <a href="#-signed-networks">signed networks</a> - <a href="#-ego-networks">ego networks</a> - <a href="#-multilevel-networks">multilevel networks</a> - <a href="#-multigraphs">multigraphs</a></p>
<p><a href="#loading-network-data-into-r">Loading network data</a></p>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The main focus of this tutorial is empirical analysis of networks and skips a lot of additional functionality of igraph For the most part of this tutorial, we assume that the network data is already present in R. Reading in data may not pose much of an issue if you are already familiar with R, but can be quite a challenge if you are new to R. The last section of this tutorial is devoted to this topic in great detail.</p>
<p>The tutorial does introduce key terms for network analysis, but much of the theory behind them is not explained in great detail. This tutorial is meant to be “hands-on”, giving practical help for empirical work. If you are interested in the technical/theoretical details behind certain methods, please consult relevant literature (a list is given at the end of the tutorial).</p>
</section>
<section id="required-libraries" class="level1">
<h1>Required libraries</h1>
<p>To run all the code in this tutorial, you need to install and load three packages.</p>
<div class="cell" data-hash="index_cache/html/install_libraries_8d96f59eea0356903bd8c504511aae4a">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"igraph"</span>,<span class="st">"netrankr"</span>))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"schochastics/networkdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>igraph</code> is used for the majority of analytic tasks and for its data structures. <code>netrankr</code> is a package for network centrality.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(netrankr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(networkdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/silent_libraries_d6afceaf50d9a1a1fdbea004b30a4fa1">

</div>
<p>Make sure you have at least the version given below. Some of the examples may not be backward compatible.</p>
<div class="cell" data-hash="index_cache/html/pkg_version_check_cbe36838216e3bc9f2f2de9860f6e56d">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">"igraph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] '1.3.1'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">"netrankr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] '1.1.1'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">"networkdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] '0.1.11'</code></pre>
</div>
</div>
<hr>
</section>
<section id="which-package-to-choose" class="level1">
<h1>Which package to choose?</h1>
<p>Well, the last section spoiled already what we are going to use in this tutorial, but for the sake of completeness, I will discuss some other packages here and motivate why I would recommend <code>igraph</code> as the goto package for standard network analytic tasks.</p>
<p>Besides methods, <code>igraph</code> also provides data structures which facilitate to store and process network data. Two other packages that allow for this are <code>graph</code> and <code>network</code>. The former is, however, not available on CRAN anymore, only via Bioconductor. The latter provides the foundation for much of the statistical modelling aspects for networks such as Exponential Random Graph Models (ERGMs) and Stochastic Actor Oriented Models (SAOMs).</p>
<p>The figure below shows how many packages on CRAN rely on those three packages (i.e.&nbsp;they are mentioned in <code>Depends</code>, <code>Imports</code>, or <code>Suggests</code>).</p>
<div class="cell" data-hash="index_cache/html/crannet_depend_fbb1548adbf91cb4892b5a87402c6abc">
<div class="cell-output-display">
<p><img src="index_files/figure-html/crannet_depend-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>The figure was produced with the help of the <code>cranet</code> package (<a href="https://github.com/mbojan/cranet">link</a>). <code>igraph</code> seems to be clearly favored by the R community. So if you install a package for, say, signed network analysis, changes are high that it depends on the graph structures provided by <code>igraph</code>. Besides the data structures, the package offers a large variety of network analytic methods which are all implemented in C. The methods are well optimized and also work quite well for large graphs.</p>
<p>The <code>network</code> package historically shares some commonalities with <code>igraphs</code> data structures. The package itself, though is really only providing the data structure and no analytic methods. The <code>sna</code> package (<a href="https://cran.r-project.org/package=sna">link</a>) implements network analytic tools using the data structures provided by <code>network</code>. Overall, the syntax and provided methods are very much comparable between <code>igraph</code> and <code>sna</code> and they are almost interchangeable in this regard. The advantage of igraph is its speed. I have run several benchmark tasks and <code>igraph</code> usually comes out on top. That being said, there is no real case to be made against <code>network</code>/<code>sna</code>. If you are into statistical modelling of networks, then that should actually be the preferred choice since the <code>ergm</code> package is build on top of <code>network</code>. In this case you probably also want to look at the meta package <code>statnet</code> (<a href="http://statnet.org/">link</a>) which includes <code>network</code>, <code>sna</code>, and <code>ergm</code> (among other packages).</p>
<p>The package <code>intergraph</code> (<a href="https://cran.r-project.org/package=intergraph">link</a>) can be used if you need to switch representations between <code>igraph</code> and <code>network</code>.</p>
<hr>
</section>
<section id="basic-network-notations" class="level1">
<h1>Basic network notations</h1>
<p>Networks are commonly represented with an <strong>adjacency matrix</strong> or via an <strong>edgelist</strong>. If you are interested in a “tidy way” checkout my <a href="../tidynetAnaR/">tidygraph</a> tutorial. Below, we represent friendship relations between Bob, Ann, and Steve as a matrix and an edgelist.</p>
<div class="cell" data-hash="index_cache/html/simple_struc_12f757fffe3227aca3a098b4eba43f24">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adjacency matrix</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>),<span class="at">nrow =</span> <span class="dv">3</span>,<span class="at">ncol =</span> <span class="dv">3</span>,<span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(A) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(A) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Bob"</span>,<span class="st">"Ann"</span>,<span class="st">"Steve"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Bob Ann Steve
Bob     0   1     1
Ann     1   0     1
Steve   1   1     0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#edge list</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>el <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="st">"Bob"</span>,<span class="st">"Ann"</span>,<span class="st">"Bob"</span>,<span class="st">"Steve"</span>,<span class="st">"Ann"</span>,<span class="st">"Steve"</span>),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">nrow =</span> <span class="dv">3</span>,<span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>el</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]  [,2]   
[1,] "Bob" "Ann"  
[2,] "Bob" "Steve"
[3,] "Ann" "Steve"</code></pre>
</div>
</div>
<p>The adjacency matrix <span class="math inline">\(A\)</span> is symmetric, meaning that the relations are undirected, i.e.&nbsp;Bob is friends with Ann and Ann is friends with Bob. In general, <span class="math inline">\(A[i,j]=1\)</span>, if there is a relation between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>. If <span class="math inline">\(A[i,j]=1\)</span> does not imply <span class="math inline">\(A[j,i]=1\)</span> then <span class="math inline">\(A\)</span> defines a directed network.</p>
<p>Once we have defined an edgelist or an adjacency matrix, we can turn them into <code>igraph</code> objects as follows.</p>
<div class="cell" data-hash="index_cache/html/simple_graph_9fa69fdbcf2713900372714380d97705">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(A, <span class="at">mode =</span> <span class="st">"undirected"</span>, <span class="at">diag =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">graph_from_edgelist</span>(el,<span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#g1 and g2 are the same graph so only printing g1</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>g1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 792b086 UN-- 3 3 -- 
+ attr: name (v/c)
+ edges from 792b086 (vertex names):
[1] Bob--Ann   Bob--Steve Ann--Steve</code></pre>
</div>
</div>
<p>The printed summary shows some general descriptives of the graph. The string “UN–” in the first line indicates that the network is <em>U</em>ndirected (<em>D</em> for directed graphs) and has a <em>N</em>ame attribute (we named the nodes Bob, Ann, and Steve). The third and forth character are <em>W</em>, if there is a edge weight attribute, and <em>B</em> if the network is bipartite (there exists a node attribute “type”). The following number indicate the number of nodes and edges. The second line lists all graph, node and edge variables. Here, we only have a node attribute “name”.</p>
<p>The conversion from edgelist/adjacency matrix into an igraph object is quite straightforward. The only difficulty is setting the parameters correctly (Is the network directed or not?), especially for edgelists where it may not immediately be obvious if the network is directed or not.</p>
<p>In the following, we use a larger network to introduce some terminology.</p>
<div class="cell" data-hash="index_cache/html/load_greys_ae6011bb0e8a61f8c41ef3685c1a0d7a">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"greys"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/plot_greys_a543f65699ea5c317fe90e0b656bff96">
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_greys-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>The “greys” network is part of the <code>networkdata</code> package and consists of most characters from the show “Grey’s Anatomy” and who hooked up with whom.</p>
<div class="cell" data-hash="index_cache/html/print_greys_703d58d4beae13df3c9c65ae3693d69e">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>greys</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH f7716f1 UN-- 54 57 -- 
+ attr: name (v/c), sex (v/c), race (v/c), birthyear (v/n), position
| (v/c), season (v/n), sign (v/c)
+ edges from f7716f1 (vertex names):
 [1] Arizona Robbins--Leah Murphy     Alex Karev     --Leah Murphy    
 [3] Arizona Robbins--Lauren Boswell  Arizona Robbins--Callie Torres  
 [5] Erica Hahn     --Callie Torres   Alex Karev     --Callie Torres  
 [7] Mark Sloan     --Callie Torres   George O'Malley--Callie Torres  
 [9] Izzie Stevens  --George O'Malley Meredith Grey  --George O'Malley
[11] Denny Duqutte  --Izzie Stevens   Izzie Stevens  --Alex Karev     
[13] Derek Sheperd  --Meredith Grey   Preston Burke  --Cristina Yang  
+ ... omitted several edges</code></pre>
</div>
</div>
<hr>
</section>
<section id="descriptives-and-more-notations" class="level1">
<h1>Descriptives and more notations</h1>
<p>The <strong>density</strong> of a network is defined as the fraction of the potential edges in a network that are actually present.</p>
<div class="cell" data-hash="index_cache/html/density_959732d302ec7c2b24d9f44167e942b3">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">graph.density</span>(<span class="fu">graph.empty</span>(<span class="dv">10</span>)),</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">graph.density</span>(greys),</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">graph.density</span>(<span class="fu">graph.full</span>(<span class="dv">10</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0000000 0.0398323 1.0000000</code></pre>
</div>
</div>
<p>The density of an empty network is <span class="math inline">\(0\)</span> and for the full network it is <span class="math inline">\(1\)</span>. The density of empirical network lies somewhere in between but as the number of nodes increases, we’d expect the density to decrease and the network becomes quite sparse.</p>
<p>A <strong>shortest path</strong> is a path that connects two nodes in a network with a minimal number of edges. The length of a shortest path is called the <strong>distance</strong> between two nodes.</p>
<div class="cell" data-hash="index_cache/html/shortest_path_d5795a5cb2a719cb68ec3533d93f03f5">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shortest_paths</span>(greys,<span class="at">from =</span> <span class="st">"Alex Karev"</span>,<span class="at">to =</span> <span class="st">"Owen Hunt"</span>,<span class="at">output =</span> <span class="st">"vpath"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$vpath
$vpath[[1]]
+ 5/54 vertices, named, from f7716f1:
[1] Alex Karev         Addison Montgomery Mark Sloan         Teddy Altman      
[5] Owen Hunt         


$epath
NULL

$predecessors
NULL

$inbound_edges
NULL</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/greys_shortest_path_8b50e108b52c59a7d983a4d6febaf813">
<div class="cell-output-display">
<p><img src="index_files/figure-html/greys_shortest_path-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/distances_811c62f4901dbf72099aae8f30eeef69">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distances</span>(greys)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   Addison Montgomery Adele Webber Teddy Altman Amelia Shepherd
Addison Montgomery                  0          Inf            2               2
Adele Webber                      Inf            0          Inf             Inf
Teddy Altman                        2          Inf            0               2
Amelia Shepherd                     2          Inf            2               0
Arizona Robbins                     3          Inf            3               3
Rebecca Pope                        2          Inf            4               4
Jackson Avery                       3          Inf            3               3
Miranda Bailey                    Inf          Inf          Inf             Inf
Ben Warren                        Inf          Inf          Inf             Inf
Henry Burton                        3          Inf            1               3
                   Arizona Robbins Rebecca Pope Jackson Avery Miranda Bailey
Addison Montgomery               3            2             3            Inf
Adele Webber                   Inf          Inf           Inf            Inf
Teddy Altman                     3            4             3            Inf
Amelia Shepherd                  3            4             3            Inf
Arizona Robbins                  0            3             4            Inf
Rebecca Pope                     3            0             3            Inf
Jackson Avery                    4            3             0            Inf
Miranda Bailey                 Inf          Inf           Inf              0
Ben Warren                     Inf          Inf           Inf              1
Henry Burton                     4            5             4            Inf
                   Ben Warren Henry Burton
Addison Montgomery        Inf            3
Adele Webber              Inf          Inf
Teddy Altman              Inf            1
Amelia Shepherd           Inf            3
Arizona Robbins           Inf            4
Rebecca Pope              Inf            5
Jackson Avery             Inf            4
Miranda Bailey              1          Inf
Ben Warren                  0          Inf
Henry Burton              Inf            0</code></pre>
</div>
</div>
<p>The Grey’s Anatomy network is <strong>disconnected</strong> and consists of <span class="math inline">\(4\)</span> <strong>connected components</strong>. There are no shortest paths between components, which means that the distance is not measurable and set to infinity.</p>
<p>The length of the longest shortest path is called the <strong>diameter</strong> of the network.</p>
<div class="cell" data-hash="index_cache/html/diameter_c2b1bda232539573fa0748e497854f52">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diameter</span>(greys)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/greys_diameter_2381ac0ce2ea2a4deebeffb1f32b1f04">
<div class="cell-output-display">
<p><img src="index_files/figure-html/greys_diameter-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p><strong>Transitivity</strong> measures the probability that the neighbors of a node are also connected. This is also called the <strong>clustering coefficient</strong>.</p>
<div class="cell" data-hash="index_cache/html/transitivity_fea7b9a82814ecd10c6b541bb3d2d5a7">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(greys, <span class="at">type =</span> <span class="st">"global"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(greys, <span class="at">type =</span> <span class="st">"local"</span>, <span class="at">isolates =</span> <span class="st">"zero"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
[39] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</code></pre>
</div>
</div>
<p>The global transitivity of an undirected network is the ratio of the triangles and the connected triples in the network. Local transitivity of a node is the ratio of the triangles connected to the node and the triples centered on the node itself. In social networks, we generally assume that the transitivity is quite high (“the friend of my friend is also my friend”). In our example, we have zero for all values. This is due to the fact that a triangle would require a same sex hook-up which did not occur (<em>Disclaimer: I never watched the show and gathered the hook ups from various internet resources. So this may well be wrong.</em>).</p>
<p>For directed networks, a measure of importance is <strong>reciprocity</strong>, which is defined as the proportion of mutual edges between nodes. To illustrate the measure, we use a network of grooming relations among a group of rhesus monkeys.</p>
<div class="cell" data-hash="index_cache/html/reciprocity_example_e1b4bfa847c24ac220eff0e8f3b3e12a">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"rhesus"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">reciprocity</span>(rhesus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.756757</code></pre>
</div>
</div>
<p>About 76% of edges are reciprocated in the network. The figure below highlights the reciprocated edges.</p>
<div class="cell" data-hash="index_cache/html/rhesus_net_740d6d8d24113ad4a734e187d664a6b8">
<div class="cell-output-display">
<p><img src="index_files/figure-html/rhesus_net-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<section id="use-case-triad-census" class="level2">
<h2 class="anchored" data-anchor-id="use-case-triad-census">Use case: triad census</h2>
<details>
<summary>
Expand
</summary>
<p>In this short use case example, we will discuss the <strong>triad census</strong> of a directed network. In a directed network, there are 16 possible configurations of edges that can occur between three nodes.</p>
<p><img src="triad_census.jpg" class="img-fluid"></p>
<p>The triad census of a network gives the number of occurrences of each of these triad. Triads are labelled <code>xyzL</code> where <code>x</code> is the number of reciprocated ties, <code>y</code> is the number of unreciprocated ties and <code>z</code> is the number of null ties. The <code>L</code> term is a letter (U,C,D or T) which allows to differentiate between triads where these numbers are the same.</p>
<p>One of the many applications of the triad census is to compare a set of networks. In this example, we are tackling the question of “how transitive is football?” and asses structural differences among a set of football leagues.</p>
<div class="cell" data-hash="index_cache/html/football_triad_c65ce92aee20708afe81e27b9f8b1ef7">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"football_triad"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>football_triad</code> is a list which contains networks of 112 football leagues as igraph objects. A directed link between team A and B indicates that A won a match against B. Note that there can also be an edge from B to A, since most leagues play a double round robin. For the sake of simplicity, all draws were deleted so that there could also be null ties between two teams if both games ended in a draw.</p>
<p>Below, we calculate the triad census for all network at once using <code>lapply()</code>. The function returns the triad census for each network as a list, which we turn into a matrix in the second step. Afterwards, we manually add the row and column names of the matrix.</p>
<div class="cell" data-hash="index_cache/html/football_census_e58899fcbde4944925b4cb9f0e6cf17d">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>footy_census <span class="ot">&lt;-</span> <span class="fu">lapply</span>(football_triad,triad_census) </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>footy_census <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">unlist</span>(footy_census),<span class="at">ncol=</span><span class="dv">16</span>,<span class="at">byrow =</span> T)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(footy_census) <span class="ot">&lt;-</span> <span class="fu">sapply</span>(football_triad,<span class="cf">function</span>(x) x<span class="sc">$</span>name)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(footy_census) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"003"</span>,<span class="st">"012"</span>,<span class="st">"102"</span>,<span class="st">"021D"</span>,<span class="st">"021U"</span>,<span class="st">"021C"</span>,<span class="st">"111D"</span>,<span class="st">"111U"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"030T"</span>,<span class="st">"030C"</span>,<span class="st">"201"</span>,<span class="st">"120D"</span>,<span class="st">"120U"</span>,<span class="st">"120C"</span>,<span class="st">"210"</span>,<span class="st">"300"</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">#normalize to make proportions comparable across leagues</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>footy_census_norm <span class="ot">&lt;-</span> footy_census<span class="sc">/</span><span class="fu">rowSums</span>(footy_census)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">#check the Top 5 leagues</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">rownames</span>(footy_census)<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"england"</span>,<span class="st">"spain"</span>,<span class="st">"germany"</span>,</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">"italy"</span>,<span class="st">"france"</span>))</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>footy_census[idx,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        003 012 102 021D 021U 021C 111D 111U 030T 030C 201 120D 120U 120C 210
england   2  10   0   58   31   40   34   44  338   29  19  118  129  143 131
france    1  23   5   30   33   44   48   40  332   41  16  132  108  160 114
germany   0  21   6   27   19   49   38   46  165   16  23   77   79  117 120
italy     1   4   2   35   43   30   30   22  419   38   5  164  116  118  99
spain     0   8   4   27   42   45   32   35  364   43  11  126  105  148 130
        300
england  14
france   13
germany  13
italy    14
spain    20</code></pre>
</div>
</div>
<p>Notice how the transitive triad (030T) has the largest count in the top leagues, hinting toward the childhood wisdom: “If A wins against B and B wins against C, then A must win against C”.</p>
<p>In empirical studies, we are not necessarily only interested in transitive triads, but rather how the triad census profiles compare across networks. We follow <a href="https://doi.org/10.1111%2Fj.1467-9531.2007.00179.x">Kathrine Faust’s</a> suggestion and do a singular value decomposition (SVD) on the normalized triad census matrix.</p>
<div class="cell" data-hash="index_cache/html/svd_footy_1b33a0e5e2b6a87dc76fd6f2b3957b3b">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>footy_svd <span class="ot">&lt;-</span> <span class="fu">svd</span>(footy_census_norm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>SVDs are used to reduce the dimensionality of the data, but retaining most of the information. In our case, the data is 16 dimensional, which is impossible to visualize to compare the networks. With an SVD, we can reduce it to two dimensions and get a better visual overview.</p>
<div class="cell" data-hash="index_cache/html/plot_svd_u_ea901587eb81b37f89cecf6763bb375e">
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_svd_u-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>How to interpret the dimensions? To investigate this question, we take a closer look at the first two dimensions and compare it to some network descriptives. For the sake of brevity, we here only look at the density and proportion of 030T triads. In general, any node/dyad/triad level statistic could be used.</p>
<div class="cell" data-hash="index_cache/html/svd1_density_8bf42f43152d819aa77177c38eacb46b">
<div class="cell-output-display">
<p><img src="index_files/figure-html/svd1_density-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Density doesn’t really seem to be related to the first dimension in this case (in many cases it is!). Might be worthwhile to explore this further</p>
<div class="cell" data-hash="index_cache/html/svd2_030T_e8c64a940183bfc402420964c3d5fed2">
<div class="cell-output-display">
<p><img src="index_files/figure-html/svd2_030T-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>For the second dimension, we get a clearer association. It seems that the fraction of transitive triads is a good indicator for structural differences among leagues.</p>
<p>More details can be found in the paper by Kathrine Faust.</p>
</details>
<hr>
</section>
</section>
<section id="centrality" class="level1">
<h1>Centrality</h1>
<p>In a nutshell, a measure of centrality is an index that assigns a numeric values to the nodes of the network. The higher the value, the more central the node. “Being central” is a very ambiguous term and it is thus no surprise that there exists a large variety of indices that assess centrality with very different structural properties of the network.</p>
<p>Given the abundance of measures, we will also look at dedicated centrality packages that implement indices which are not available in <code>igraph</code>.</p>
<p><code>igraph</code> contains the following 10 indices:</p>
<ul>
<li>degree (<code>degree()</code>)</li>
<li>weighted degree (<code>graph.strength()</code>)</li>
<li>betweenness (<code>betweenness()</code>)</li>
<li>closeness (<code>closeness()</code>)</li>
<li>eigenvector (<code>eigen_centrality()</code>)</li>
<li>alpha centrality (<code>alpha_centrality()</code>)</li>
<li>power centrality (<code>power_centrality()</code>)</li>
<li>PageRank (<code>page_rank()</code>)</li>
<li>eccentricity (<code>eccentricity()</code>)</li>
<li>hubs and authorities (<code>authority_score()</code> and <code>hub_score()</code>)</li>
<li>subgraph centrality (<code>subgraph_centrality()</code>)</li>
</ul>
<p>To illustrate some of the indices, we use the “dbces11” graph which is part of the <code>netrankr</code> package.</p>
<div class="cell" data-hash="index_cache/html/load_dbces_417bc5ccdb85db806e2afb307d8fcc99">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"dbces11"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/dbces11_basic_plot_55ecdfa0d8840040ae00e15409a04c16">
<div class="cell-output-display">
<p><img src="index_files/figure-html/dbces11_basic_plot-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p><strong>degree</strong> simply counts the number of neighbors a node has.</p>
<div class="cell" data-hash="index_cache/html/degree_dbces11_3efd2db08c9f19194013548ef399a767">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">degree</span>(dbces11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A B C D E F G H I J K 
1 1 2 2 3 4 4 4 4 4 5 </code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/degree_dbces11_plot_4903a49bccd607554dd1218dea8ac378">
<div class="cell-output-display">
<p><img src="index_files/figure-html/degree_dbces11_plot-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p><strong>closeness</strong> computes the shortest path distances among nodes. The most central node has the minimum distance to all other nodes (Since high scores are associated with central nodes, the distances are inverted).</p>
<div class="cell" data-hash="index_cache/html/closeness_dbces11_72dbe1687be64beffe727449f45d5815">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">closeness</span>(dbces11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        A         B         C         D         E         F         G         H 
0.0370370 0.0294118 0.0400000 0.0400000 0.0500000 0.0588235 0.0526316 0.0555556 
        I         J         K 
0.0555556 0.0526316 0.0555556 </code></pre>
</div>
</div>
<p>The animation below gives an intuition on the calculation for one node. <img src="closeness.gif" class="img-fluid"></p>
<p><strong>betweeness</strong> is the number of shortest paths that pass through a node (divided by the total number of shortest paths)</p>
<div class="cell" data-hash="index_cache/html/betweenness_dbces11_eb17ae40d8d2d6529596e3a28e7fd00e">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>(dbces11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       A        B        C        D        E        F        G        H 
 0.00000  0.00000  0.00000  9.00000  3.83333  9.83333  2.66667 16.33333 
       I        J        K 
 7.33333  1.33333 14.66667 </code></pre>
</div>
</div>
<p>To get an intuition what it means to have a high betweenness, check the network below.</p>
<div class="cell" data-hash="index_cache/html/betweenness_bridge_7aa3d8213cd8bcdcf13bd564239f028c">
<div class="cell-output-display">
<p><img src="index_files/figure-html/betweenness_bridge-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Any shortest path from the right will pass through the red node and vice versa. The red note is thus a sort of “gatekeeper” for any information that is passed from left to right.</p>
<p><strong>eigenvector centrality</strong> extends the idea of degree by assuming that a node is central if it is connected to other central nodes.</p>
<div class="cell" data-hash="index_cache/html/eigen_dbces11_e455432cd5712a7cf82d992faa854448">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">eigen_centrality</span>(dbces11)<span class="sc">$</span>vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        A         B         C         D         E         F         G         H 
0.2259630 0.0645825 0.3786244 0.2415182 0.5709057 0.9846544 1.0000000 0.8386195 
        I         J         K 
0.9113529 0.9986474 0.8450304 </code></pre>
</div>
</div>
<p><strong>subgraph centrality</strong> is a bit more abstract but what it does is summing up all closed walks weighting them by the inverse factorial of its length.</p>
<div class="cell" data-hash="index_cache/html/sub_dbces11_6218fb856cf849232f284318185b8c63">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subgraph_centrality</span>(dbces11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      A       B       C       D       E       F       G       H       I       J 
1.82510 1.59540 3.14857 2.42309 4.38713 7.80726 7.93941 6.67278 7.03267 8.24212 
      K 
7.38956 </code></pre>
</div>
</div>
<p>The remaining indices are mostly designed for directed networks, <strong>page rank</strong> being the prime example. Note, though that the mentioned indices can also be applied to directed networks.</p>
<p>If we highlight the most central node for the calculated indices, we get the following.</p>
<div class="cell" data-hash="index_cache/html/dbces11_plot_dbb3057381ad34ff46f7bde2f3ebb6c8">
<div class="cell-output-display">
<p><img src="index_files/figure-html/dbces11_plot-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>So each index picks a different node as most central. While this is just a toy example, it highlights how influential the choice of indices can be in empirical settings.</p>
<p>10 is already quite a lot of indices, but there exist far more in the literature. Some of those are implemented in other packages.</p>
<p>The <code>sna</code> package implements roughly the same indices as <code>igraph</code> but adds:</p>
<ul>
<li>flow betweenness (<code>flowbet()</code>)</li>
<li>load centrality (<code>loadcent()</code>)</li>
<li>Gil-Schmidt Power Index (<code>gilschmidt()</code>)</li>
<li>information centrality (<code>infocent()</code>)</li>
<li>stress centrality (<code>stresscent()</code>)</li>
</ul>
<p>There are also some dedicated centrality packages, such as <code>centiserve</code>, <code>CINNA</code>, <code>influenceR</code> and <code>keyplayer</code>. The biggest in terms of implemented indices is currently <code>centiserve</code> with a total of 33 indices.</p>
<div class="cell" data-hash="index_cache/html/centiserve_7b2186edb093ea525419aaea1b88a05d">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(centiserve)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="fu">lsf.str</span>(<span class="st">"package:centiserve"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "averagedis"            "barycenter"            "bottleneck"           
 [4] "centroid"              "closeness.currentflow" "closeness.freeman"    
 [7] "closeness.latora"      "closeness.residual"    "closeness.vitality"   
[10] "clusterrank"           "communibet"            "communitycent"        
[13] "crossclique"           "decay"                 "diffusion.degree"     
[16] "dmnc"                  "entropy"               "epc"                  
[19] "geokpath"              "hubbell"               "katzcent"             
[22] "laplacian"             "leaderrank"            "leverage"             
[25] "lincent"               "lobby"                 "markovcent"           
[28] "mnc"                   "pairwisedis"           "radiality"            
[31] "salsa"                 "semilocal"             "topocoefficient"      </code></pre>
</div>
</div>
<p>The package is maintained by the team behind <a href="http://www.centiserver.org/">centiserver</a>, the “comprehensive centrality resource and server for centralities calculation”. The website collects indices found in the literature. Currently (February 2022), it lists 403 different indices. That’s…a lot.</p>
<p>The description of <code>CINNA</code> says “Functions for computing, comparing and demonstrating top informative centrality measures within a network.” Most of the indices in the package are imported from other package, such as <code>centiserve</code>. In addition, there are:</p>
<ul>
<li>Dangalchev closeness (<code>dangalchev_closeness_centrality()</code>)</li>
<li>group centrality (<code>group_centrality()</code>)</li>
<li>harmonic closeness (<code>harmonic_centrality()</code>)</li>
<li>local bridging centrality (<code>local_bridging_centrality()</code>)</li>
</ul>
<p>The function <code>calculate_centralities()</code> can be used to calculate all applicable indices to a network. The primary purpose of the package is to facilitate the choice of indices by visual and statistical tools. If you are interested in the details, see this <a href="https://www.datacamp.com/community/tutorials/centrality-network-analysis-R">tutorial</a> and this <a href="https://cran.r-project.org/web/packages/CINNA/vignettes/CINNA.html">vignette</a>.</p>
<p><code>influenceR</code> and <code>keyplayer</code> are comparably small packages which implement only a small number of indices.</p>
<p>The choice of indices can be overwhelming and little guidelines exist on when to choose what. The worst thing to do in any case is to apply a handful of indices and pick the result that suits your interpretation best. In best case, you have substantive arguments to apply an index and the result does match the hypothesis (or not).</p>
<section id="use-case-florentine-families" class="level2">
<h2 class="anchored" data-anchor-id="use-case-florentine-families">Use case: Florentine Families</h2>
<details>
<summary>
Expand
</summary>
<p>A classic example application of centrality indices is the “Florentine Families” dataset, which is included in the <code>networkdata</code> package.</p>
<div class="cell" data-hash="index_cache/html/flo_data_3825bdef1ff858abae28d0a12c567caf">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"flo_marriage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/flo_plot_fc5a94ee1d45f405dba405717ded0e32">
<div class="cell-output-display">
<p><img src="index_files/figure-html/flo_plot-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Th network shows marriage ties among Renaissance Families in Florence. Marriages at that time were strategic to improve the standing of families in society. The size of the names is proportional to the wealth of the families. Although the Strozzi were the wealthiest family, it was ultimately the Medici who became the most powerful family. This is in part due to their central position within this marriage network.</p>
<p>The table bellow shows the ranking for the four most commonly used centrality indices (1=top rank).</p>
<div class="cell" data-hash="index_cache/html/centralities_flo_52d19c64ef5d238636689ccf70469837">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">degree</th>
<th style="text-align: right;">betweenness</th>
<th style="text-align: right;">closeness</th>
<th style="text-align: right;">eigen</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Acciaiuoli</td>
<td style="text-align: right;">13.5</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">11.5</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="even">
<td style="text-align: left;">Albizzi</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Barbadori</td>
<td style="text-align: right;">10.5</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bischeri</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Castellani</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">9.5</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ginori</td>
<td style="text-align: right;">13.5</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">13.0</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Guadagni</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lamberteschi</td>
<td style="text-align: right;">13.5</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">14.0</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Medici</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pazzi</td>
<td style="text-align: right;">13.5</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">15.0</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Peruzzi</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">11.5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pucci</td>
<td style="text-align: right;">16.0</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">16.0</td>
<td style="text-align: right;">16</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ridolfi</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salviati</td>
<td style="text-align: right;">10.5</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">9.5</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Strozzi</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tornabuoni</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>No matter what structural feature we consider to be important, the Medici always have the most advantageous position.</p>
</details>
</section>
<section id="additional-material" class="level2">
<h2 class="anchored" data-anchor-id="additional-material">Additional Material</h2>
<p>I have written a series of blog post about the concept of network centrality, which introduces some novel tools to assess centrality. These also discuss empirical applications of indices in greater detail. (<a href="http://blog.schochastics.net/post/network-centrality-in-r-introduction/">1</a>, <a href="http://blog.schochastics.net/post/network-centrality-in-r-neighborhood-inclusion/">2</a>, <a href="http://blog.schochastics.net/post/network-centrality-in-r-new-ways-of-measuring-centrality/">3</a>)</p>
<p>The blog posts rely on the <code>netrankr</code> package (<a href="http://netrankr.schochastics.net/">link</a>), which also comes with 9 vignettes that explain the functionality in great detail. Note that the package also implements around 30 indices, but the index based approach is not its main purpose.</p>
<hr>
</section>
</section>
<section id="cliques-and-clustering" class="level1">
<h1>Cliques and Clustering</h1>
<p>A <em>clique</em> in a network is a set of nodes that form a complete subnetwork within a network (called a complete <strong>subgraph</strong>). A <strong>maximal clique</strong> is a clique that cannot be extended to a bigger clique by addding more nodes to it.</p>
<div class="cell" data-hash="index_cache/html/load_clique_graph_260ce9fa7a8574e638a3636825e5ab2f">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"clique_graph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All maximal cliques can be calculated with <code>max_cliques()</code> (only feasible for fairly small networks). The min parameter can be used to set a minimum size. Here, we want to ignore all cliques of size <span class="math inline">\(2\)</span>.</p>
<div class="cell" data-hash="index_cache/html/calc_max_cliques_0f0904dbb5235f9ce1be78def2d3fd99">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># only return cliques with three or more nodes</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>cl <span class="ot">&lt;-</span> <span class="fu">max_cliques</span>(clique_graph,<span class="at">min =</span> <span class="dv">3</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>cl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
+ 3/30 vertices, from 0193e05:
[1]  9 17 18

[[2]]
+ 3/30 vertices, from 0193e05:
[1] 7 4 5

[[3]]
+ 3/30 vertices, from 0193e05:
[1] 7 4 8

[[4]]
+ 3/30 vertices, from 0193e05:
[1] 10  2 11

[[5]]
+ 3/30 vertices, from 0193e05:
[1] 16 12 15

[[6]]
+ 3/30 vertices, from 0193e05:
[1] 6 1 5

[[7]]
+ 4/30 vertices, from 0193e05:
[1] 12 13 15 14

[[8]]
+ 3/30 vertices, from 0193e05:
[1] 12  2  1

[[9]]
+ 5/30 vertices, from 0193e05:
[1] 1 2 5 4 3</code></pre>
</div>
</div>
<p>The figure below shows the network and the found maximal cliques.</p>
<div class="cell" data-hash="index_cache/html/plot_clique_graph_e2d8e9fef3bd4ac0c9ae94e25356dd95">
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_clique_graph-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Related to cliques is the <strong>k-core decomposition</strong> of a network. A k-core is a subgraph in which every node has at least k neighbors within the subgraph. A k-core is thus a relaxed version of a clique.<br>
The function <code>coreness()</code> can be used to calculate the k-core membership for each node.</p>
<div class="cell" data-hash="index_cache/html/kcore_0608965cdb4837419398605692eabda9">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>kcore <span class="ot">&lt;-</span> <span class="fu">coreness</span>(clique_graph)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>kcore</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 4 4 4 4 4 3 2 2 2 2 2 3 3 3 3 3 2 2 1 1 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/kcore_plot_ef0ea278362c833bfa095aad8568a7b6">
<div class="cell-output-display">
<p><img src="index_files/figure-html/kcore_plot-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Cliques are the prototypical and most strict definition of a cohesive subgroup of a graph. In empirical networks, however, we rarely encounter situations where we can partition the whole network into a set of cliques. A relaxed version of this problem is that of clustering, also referred to as <strong>comunity detection</strong>. A cluster is loosely defined as a group of nodes which are internally densely and externally sparsely connected. The network below shows an example for a network with a visible and intuitive cluster structure.</p>
<div class="cell" data-hash="index_cache/html/clustered_graph_58046d190a40e3811e4bc9fea4c141ad">
<div class="cell-output-display">
<p><img src="index_files/figure-html/clustered_graph-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>In contrast, the network below does not really seem to have any well defined cluster structure.</p>
<div class="cell" data-hash="index_cache/html/random_graph_cafcf3c5ea81b37fc67167d44ffaec98">
<div class="cell-output-display">
<p><img src="index_files/figure-html/random_graph-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>The following algorithms for graph clustering are implemented in <code>igraph</code>.</p>
<div class="cell" data-hash="index_cache/html/cluster_alg_15285762a217d8b0efeecf0eed45f64a">
<div class="cell-output cell-output-stdout">
<pre><code> [1] "cluster_edge_betweenness"  "cluster_fast_greedy"      
 [3] "cluster_fluid_communities" "cluster_infomap"          
 [5] "cluster_label_prop"        "cluster_leading_eigen"    
 [7] "cluster_leiden"            "cluster_louvain"          
 [9] "cluster_optimal"           "cluster_spinglass"        
[11] "cluster_walktrap"         </code></pre>
</div>
</div>
<p>Most of these algorithms are based on “modularity maximization”. Modularity is defined as the fraction of edges that fall within given groups minus the expected fraction if edges were distributed at random.</p>
<p>The workflow of a cluster analysis is always the same, independent from the chosen method. We illustrate the workflow using the infamous karate club network.</p>
<div class="cell" data-hash="index_cache/html/karate_d94fa47d4477369488aa2f921075745c">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"karate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/karate_plot_f73e1e92cc649cc64019bfec1b9ae096">
<div class="cell-output-display">
<p><img src="index_files/figure-html/karate_plot-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/cluster_ex_b5cf861324bb33da2b62229367d72542">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute clustering</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>clu <span class="ot">&lt;-</span> <span class="fu">cluster_louvain</span>(karate)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># cluster membership vector</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>mem <span class="ot">&lt;-</span> <span class="fu">membership</span>(clu)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>mem</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 2 2 2 1 3 1 2 1 1 1 3 3 2 1 3 1 3 1 3 4 4 4 3 4 4 3 3 4 3 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># clusters as list</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>com <span class="ot">&lt;-</span> <span class="fu">communities</span>(clu)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>com</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`1`
 [1]  1  2  3  4  8 10 12 13 14 18 20 22

$`2`
[1]  5  6  7 11 17

$`3`
 [1]  9 15 16 19 21 23 27 30 31 33 34

$`4`
[1] 24 25 26 28 29 32</code></pre>
</div>
</div>
<p>To compare the quality of clusterings, we can compute the modularity score for each output.</p>
<div class="cell" data-hash="index_cache/html/karate_cluster_a16c7fc36fe629df6d9eca68a07eadc2">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>imc <span class="ot">&lt;-</span> <span class="fu">cluster_infomap</span>(karate)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>lec <span class="ot">&lt;-</span> <span class="fu">cluster_leading_eigen</span>(karate)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>loc <span class="ot">&lt;-</span> <span class="fu">cluster_louvain</span>(karate)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>sgc <span class="ot">&lt;-</span> <span class="fu">cluster_spinglass</span>(karate)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>wtc <span class="ot">&lt;-</span> <span class="fu">cluster_walktrap</span>(karate)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">infomap =</span> <span class="fu">modularity</span>(karate,<span class="fu">membership</span>(imc)),</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">eigen =</span> <span class="fu">modularity</span>(karate,<span class="fu">membership</span>(lec)),</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">louvain =</span> <span class="fu">modularity</span>(karate,<span class="fu">membership</span>(loc)),</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">spinglass =</span> <span class="fu">modularity</span>(karate,<span class="fu">membership</span>(sgc)),</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">walk =</span> <span class="fu">modularity</span>(karate,<span class="fu">membership</span>(wtc)))</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>scores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  infomap     eigen   louvain spinglass      walk 
 0.402038  0.393409  0.419790  0.419790  0.353222 </code></pre>
</div>
</div>
<p>For the karate network, <code>cluster_spinglass()</code> produces the highest modularity score. The corresponding clustering is shown below.</p>
<div class="cell" data-hash="index_cache/html/karate_plot_clu_114a6c32aaa696394a924cd7d0c667e4">
<div class="cell-output-display">
<p><img src="index_files/figure-html/karate_plot_clu-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Modularity maximization is still widely considered as the state-of-the-art clustering method for networks. There are, however, some technical shortcomings that one should be aware of. One of those is the so called “resolution limit”. When modularity is being maximized, it can happen that smaller clusters are merged together to form bigger clusters. The prime example is the graph that consists of cliques connected in a ring.</p>
<div class="cell" data-hash="index_cache/html/prepare_Kn_graph_a634437083b0f932a5f5e61d8c346b27">

</div>
<p>The figure below shows such a graph, consisting of 50 cliques of size 5.</p>
<div class="cell" data-hash="index_cache/html/plot_K50_blank_64a7e3c18f210db6c07231e9546e6918">
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_K50_blank-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Intuitively, any clustering method should return a cluster for each clique.</p>
<div class="cell" data-hash="index_cache/html/clu_louvain_K50_96d6db681c18624714d57c625e3497cb">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>clu_louvain <span class="ot">&lt;-</span> <span class="fu">cluster_louvain</span>(K50)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">membership</span>(clu_louvain))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 
15 10 10 10 10 10 15 10 10 10 10 10 15 10 10 10 10 10 10 15 10 10 10 </code></pre>
</div>
</div>
<p>A clustering algorithm that fixes this issue is the leiden algorithm.</p>
<div class="cell" data-hash="index_cache/html/clu_leiden_K50_f33389d0898cc71f4b23dd5837d2c454">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>clu_leiden <span class="ot">&lt;-</span> <span class="fu">cluster_leiden</span>(K50,<span class="at">objective_function =</span> <span class="st">"CPM"</span>,<span class="at">resolution_parameter =</span> <span class="fl">0.5</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">membership</span>(clu_leiden))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 
 5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5 
27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 
 5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5 </code></pre>
</div>
</div>
<p>The figure below shows the clusters computed with the louvain method in grey and the leiden method in red.</p>
<div class="cell" data-hash="index_cache/html/plot_K50_clu_e1afda9915ef2e88abeb3e740c43c547">
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_K50_clu-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>I’ll spare the technical details of the leiden method. If you are interested, check out the <a href="https://www.nature.com/articles/s41598-019-41695-z">original paper</a>.</p>
<hr>
</section>
<section id="blockmodeling" class="level1">
<h1>Blockmodeling</h1>
<p>Blockmodeling is similar to</p>
<p>(Stochastic) Blockmodels, for instance, can also be used to find community structures. Several packages exist for this, such as <code>randnet</code> or <code>blockmodels</code>.</p>
<hr>
</section>
<section id="core-periphery-structures" class="level1">
<h1>Core-Periphery structures</h1>
<hr>
</section>
<section id="i-want-to-learn-about" class="level1">
<h1>I want to learn about …</h1>
<section id="two-mode-networks" class="level2">
<h2 class="anchored" data-anchor-id="two-mode-networks">… two mode networks</h2>
<details>
<summary>
Expand
</summary>
<p>A two mode network is a network that consists of two disjoint sets of nodes (like people and events). Ties connect the two sets, e. g. participation of people in events. There exists a great variety of two modenetworks. The most often encountered ones are</p>
<ul>
<li>Affiliation networks (Membership in institutions )</li>
<li>Voting/Sponsorship networks (politicians and bills)</li>
<li>Citation network (authors and papers)</li>
<li>Co-Authorship networks (authors and papers)</li>
</ul>
<p>Below we will discuss some methods via the famous “southern women” dataset consisting of 18 women who attended a series of 14 events.</p>
<div class="cell" data-hash="index_cache/html/southern_dat_load_4aa908e69df8cbe6223a6c4ca8820358">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"southern_women"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/southern_women_8c92fcf01fd466028bf820f9d3db6810">
<div class="cell-output-display">
<p><img src="index_files/figure-html/southern_women-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>The adjacency matrix of a two mode network is also referred to as an incidence matrix and can be obtained via <code>as_incidence_matrix()</code></p>
<div class="cell" data-hash="index_cache/html/incidence_southern_d3f8cf0e303a95139390b1f138f202cc">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">as_incidence_matrix</span>(southern_women)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          6/27 3/2 4/12 9/26 2/25 5/19 3/15 9/16 4/8 6/10 2/23 4/7 11/21 8/3
EVELYN       1   1    1    1    1    1    0    1   1    0    0   0     0   0
LAURA        1   1    1    0    1    1    1    1   0    0    0   0     0   0
THERESA      0   1    1    1    1    1    1    1   1    0    0   0     0   0
BRENDA       1   0    1    1    1    1    1    1   0    0    0   0     0   0
CHARLOTTE    0   0    1    1    1    0    1    0   0    0    0   0     0   0
FRANCES      0   0    1    0    1    1    0    1   0    0    0   0     0   0
ELEANOR      0   0    0    0    1    1    1    1   0    0    0   0     0   0
PEARL        0   0    0    0    0    1    0    1   1    0    0   0     0   0
RUTH         0   0    0    0    1    0    1    1   1    0    0   0     0   0
VERNE        0   0    0    0    0    0    1    1   1    0    0   1     0   0
MYRNA        0   0    0    0    0    0    0    1   1    1    0   1     0   0
KATHERINE    0   0    0    0    0    0    0    1   1    1    0   1     1   1
SYLVIA       0   0    0    0    0    0    1    1   1    1    0   1     1   1
NORA         0   0    0    0    0    1    1    0   1    1    1   1     1   1
HELEN        0   0    0    0    0    0    1    1   0    1    1   1     0   0
DOROTHY      0   0    0    0    0    0    0    1   1    0    0   0     0   0
OLIVIA       0   0    0    0    0    0    0    0   1    0    1   0     0   0
FLORA        0   0    0    0    0    0    0    0   1    0    1   0     0   0</code></pre>
</div>
</div>
<p>The <code>tnet</code> (<a href="https://CRAN.R-project.org/package=tnet">link</a>) and <code>bipartite</code> (<a href="https://CRAN.R-project.org/package=bipartite">link</a>) offer some methods to analyse two mode networks directly, by adapting tools for standard (one-mode) networks (like the ones described above).</p>
<p>Besides analyzing a two-mode network as-is, there is also the possibility to project it to one mode. Mathematically, this is done by calculating <span class="math inline">\(AA^T\)</span> or <span class="math inline">\(A^TA\)</span>, depending which mode we project on. As an example, consider the southern women dataset again.</p>
<div class="cell" data-hash="index_cache/html/proj_women_a531675945e344d9dae5c56b084740cc">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> A<span class="sc">%*%</span><span class="fu">t</span>(A)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          EVELYN LAURA THERESA BRENDA CHARLOTTE FRANCES ELEANOR PEARL RUTH
EVELYN         8     6       7      6         3       4       3     3    3
LAURA          6     7       6      6         3       4       4     2    3
THERESA        7     6       8      6         4       4       4     3    4
BRENDA         6     6       6      7         4       4       4     2    3
CHARLOTTE      3     3       4      4         4       2       2     0    2
FRANCES        4     4       4      4         2       4       3     2    2
ELEANOR        3     4       4      4         2       3       4     2    3
PEARL          3     2       3      2         0       2       2     3    2
RUTH           3     3       4      3         2       2       3     2    4
VERNE          2     2       3      2         1       1       2     2    3
MYRNA          2     1       2      1         0       1       1     2    2
KATHERINE      2     1       2      1         0       1       1     2    2
SYLVIA         2     2       3      2         1       1       2     2    3
NORA           2     2       3      2         1       1       2     2    2
HELEN          1     2       2      2         1       1       2     1    2
DOROTHY        2     1       2      1         0       1       1     2    2
OLIVIA         1     0       1      0         0       0       0     1    1
FLORA          1     0       1      0         0       0       0     1    1
          VERNE MYRNA KATHERINE SYLVIA NORA HELEN DOROTHY OLIVIA FLORA
EVELYN        2     2         2      2    2     1       2      1     1
LAURA         2     1         1      2    2     2       1      0     0
THERESA       3     2         2      3    3     2       2      1     1
BRENDA        2     1         1      2    2     2       1      0     0
CHARLOTTE     1     0         0      1    1     1       0      0     0
FRANCES       1     1         1      1    1     1       1      0     0
ELEANOR       2     1         1      2    2     2       1      0     0
PEARL         2     2         2      2    2     1       2      1     1
RUTH          3     2         2      3    2     2       2      1     1
VERNE         4     3         3      4    3     3       2      1     1
MYRNA         3     4         4      4    3     3       2      1     1
KATHERINE     3     4         6      6    5     3       2      1     1
SYLVIA        4     4         6      7    6     4       2      1     1
NORA          3     3         5      6    8     4       1      2     2
HELEN         3     3         3      4    4     5       1      1     1
DOROTHY       2     2         2      2    1     1       2      1     1
OLIVIA        1     1         1      1    2     1       1      2     2
FLORA         1     1         1      1    2     1       1      2     2</code></pre>
</div>
</div>
<p>This matrix can now be interpreted as a weighted network among the 18 women. Each entry corresponds to the number of times two women went to the same event.</p>
<div class="cell" data-hash="index_cache/html/plot_weighted_proj_12aefbe399505a4241655fd0b5fbaf9a">
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_weighted_proj-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>As you can see, the network has become very dense. A very common step is now to binarize the network. In doing so, we basically turn the network into a simple undirected one-mode network. This makes all methods we described in the first few sections applicable to the network (at least in theory). The simplest way of binarizing a weighted projection is to define a global threshold and remove a tie if its weight is below the global threshold. This is simple but come with many undesirable structural problems. More sophisticated tools work with statistical models in the background which determine if an edge weight differs enough from the expected value. If so, the edge is kept in the binary “backbone” of the network.</p>
<p>All possible backbone extraction methods are implemented in the <code>backbone</code> package (<a href="https://CRAN.R-project.org/package=backbone">link</a>). An introduction to the package can be found on <a href="https://arxiv.org/abs/1912.12779">arxiv</a>.</p>
</details>
</section>
<section id="signed-networks" class="level2">
<h2 class="anchored" data-anchor-id="signed-networks">… signed networks</h2>
<details>
<summary>
Expand
</summary>
<p>Traditional SNA usually deals with relations among entities (e.g.&nbsp;people) that are positive, including “friendship”, “advice seeking”, etc. Most network analytic tools are devised under this premise, be that centrality indices, clustering tools and so forth. But of course not all occurring relations are positive. People can be friends but also foes.</p>
<p>This gives rise to signed networks. These networks are usually composed of both, positive and negative, ties measured among a set of entities. Traditional network analytic tools are not applicable to such networks without adapting for the presents of negative ties. The <code>signnet</code> package (<a href="https://CRAN.R-project.org/package=signnet">link</a>) brings together methods that have been developed to analyse signed networks. This includes</p>
<ul>
<li>Structural balance (<a href="http://signnet.schochastics.net/articles/structural_balance.html">tutorial</a>)</li>
<li>Blockmodeling (<a href="http://signnet.schochastics.net/articles/blockmodeling.html">tutorial</a>)</li>
<li>Centrality (<a href="http://signnet.schochastics.net/articles/centrality.html">tutorial</a>)</li>
<li>Signed two-mode networks (<a href="http://signnet.schochastics.net/articles/signed_2mode.html">tutorial</a>)</li>
</ul>
<p>A dedicated tutorial for each methodology is given in the package vignettes, also linked above. Below, we just briefly discuss the structure of the package.</p>
<p>The foundation of <code>signnet</code> is provided by <code>igraph</code>. All functions in the package assume that an igraph object is a signed network if it has an edge attribute “sign” with values 1 (positive) or -1 (negative).</p>
<div class="cell" data-hash="index_cache/html/signed_example_4957922e915e31de1fa1a5e4d8c35bf1">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(signnet)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">graph.full</span>(<span class="dv">5</span>,<span class="at">directed =</span> <span class="cn">FALSE</span>,<span class="at">loops =</span> <span class="cn">FALSE</span>)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(g)<span class="sc">$</span>sign <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>g</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH d5a26e9 U--- 5 10 -- Full graph
+ attr: name (g/c), loops (g/l), sign (e/n)
+ edges from d5a26e9:
 [1] 1--2 1--3 1--4 1--5 2--3 2--4 2--5 3--4 3--5 4--5</code></pre>
</div>
</div>
<p>All methods should throw an error if the sign attribute is missing or contains other values than -1 and 1.</p>
<p>Matrices associated with a signed network follow the <code>igraph</code> naming scheme. The signed adjacency matrix can be obtained with <code>as_adj_signed()</code>.</p>
<div class="cell" data-hash="index_cache/html/signed_adj_c4c5986f9885dc1afbe1d81df5b731a1">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"tribes"</span>)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as_adj_signed</span>(tribes)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Gavev Kotun Ove Alika Nagam
Gavev     0     1  -1    -1    -1
Kotun     1     0  -1     0    -1
Ove      -1    -1   0     1     0
Alika    -1     0   1     0     0
Nagam    -1    -1   0     0     0</code></pre>
</div>
</div>
<p>The signed Laplacian matrix is obtained by <code>laplacian_matrix_signed()</code>.</p>
<div class="cell" data-hash="index_cache/html/signed_lapl_36ac44178ac26646ebf6c821ecc3735e">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">laplacian_matrix_signed</span>(tribes)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Gavev Kotun Ove Alika Nagam
Gavev     8    -1   1     1     1
Kotun    -1     8   1     0     1
Ove       1     1   6    -1     0
Alika     1     0  -1     3     0
Nagam     1     1   0     0     7</code></pre>
</div>
</div>
<p>A function not explicitly mentioned in the tutorials linked above is <code>triad_census_signed()</code> which calculates the signed triad census of a directed signed network. While the unsigned triad census has only 16 possible outcomes, there are 138 non-isomorphic signed triads, shown below. <img src="signed_triads.png" class="img-fluid"> The naming scheme is “xxx-yyyyyy” where “xxx” corresponds to the name of the respective unsigned triad and “yyyyyy” is a string of “0”, “N”, “P”, describing the type of ties present. So “300-NNNNNN” is a triad with all ties present and all ties are negative.</p>
<p>The package includes two well known datasets to play with.</p>
<p>The “tribes” dataset is a signed social network of tribes of the Gahuku–Gama alliance structure of the Eastern Central Highlands of New Guinea. The network contains sixteen tribes connected by friendship (“rova”) and enmity (“hina”).</p>
<p>The “cowList” dataset contains a list of 52 signed networks of inter-state relations over time (1946-1999). Two countries are connected by a positive tie if they form an alliance or have a peace treaty. A negative tie exists between countries who are at war or in other kinds of conflicts. The dataset is derrived from the <a href="https://correlatesofwar.org/">correlates of war</a>.</p>
</details>
</section>
<section id="ego-networks" class="level2">
<h2 class="anchored" data-anchor-id="ego-networks">… ego networks</h2>
<details>
<summary>
Expand
</summary>
<p>If you want to analyze ego networks, then I can only recommend this <a href="http://www.raffaelevacca.com/egocentric-r-book/">book</a> by <a href="http://www.raffaelevacca.com/">Raffaele Vacca</a>. Raffaele has given countless workshops on ego network analysis in R and his material should provide you with everything you need.</p>
</details>
</section>
<section id="multilevel-networks" class="level2">
<h2 class="anchored" data-anchor-id="multilevel-networks">… multilevel networks</h2>
<details>
<summary>
Expand
</summary>
<p>For analyzing multilevel networks, I recommend the <code>multinet</code> pakage (<a href="https://CRAN.R-project.org/package=multinets">link</a>). Check out this <a href="http://multilayer.it.uu.se/jss.pdf">JSS Paper</a> for a brief introduction into the package.</p>
<p>If you just want to visualize a multilevel network, then head over to my <a href="../netvizr/#multilevel-networks">network visualization</a> tutorial.</p>
</details>
</section>
<section id="multigraphs" class="level2">
<h2 class="anchored" data-anchor-id="multigraphs">… multigraphs</h2>
<details>
<summary>
Expand
</summary>
<p>Multigraphs are network representations in which multiple edges and edge loops (self edges) are permitted. In R, there are at least two relevant packages. The first is <code>multigraph</code> (<a href="https://CRAN.R-project.org/package=multigraph">link</a>) which implements some visualization methods for multigraphs.</p>
<p>The second is <code>multigraphr</code> (<a href="https://CRAN.R-project.org/package=multigraphr">link</a>) which comes with a series of statistical methods to study local and global properties of such graphs and goodness of fit tests. The <a href="https://cran.r-project.org/web/packages/multigraphr/vignettes/multigraphr.html">vignette</a> of the package is a brilliant starting point for using the package.</p>
<p>For the technical details behind <code>multigraphr</code>, you can refer to:</p>
<blockquote class="blockquote">
<p>Shafie, T. (2015). A multigraph approach to social network analysis. Journal of Social Structure, 16. (<a href="https://www.exeley.com/journal_of_social_structure/doi/10.21307/joss-2019-011">link</a>)</p>
</blockquote>
<blockquote class="blockquote">
<p>Shafie, T. (2016). Analyzing local and global properties of multigraphs. The Journal of Mathematical Sociology, 40(4), 239-264. (<a href="https://www.tandfonline.com/doi/abs/10.1080/0022250X.2016.1219732?journalCode=gmas20">link</a>)</p>
</blockquote>
<blockquote class="blockquote">
<p>Shafie, T. and Schoch, D., (2021). Multiplexity analysis of networks using multigraph representations. Statistical Methods &amp; Applications 30 (5), 1425-1444 (<a href="https://link.springer.com/article/10.1007/s10260-021-00596-0">link</a>)</p>
</blockquote>
<blockquote class="blockquote">
<p>Shafie, T. (Under review). Goodness of fit tests for random multigraph models.</p>
</blockquote>
</details>
</section>
<section id="something-else" class="level2">
<h2 class="anchored" data-anchor-id="something-else">… something else</h2>
<details>
<summary>
Expand
</summary>
<p>Cant find what you are looking for? Ping me on <a href="https://twitter.com/schochastics">twitter</a> and I see what I can do.</p>
</details>
<hr>
</section>
</section>
<section id="loading-network-data-into-r" class="level1">
<h1>Loading network data into R</h1>
<p><code>igraph</code> can deal with many different foreign network formats with the function <code>read_graph</code>. (The <code>rgexf</code> package can be used to import Gephi files.)</p>
<div class="cell" data-hash="index_cache/html/read_graph_24fd8fd775454283c7ec7aa49e1f3f94">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_graph</span>(file, <span class="at">format =</span> <span class="fu">c</span>(<span class="st">"edgelist"</span>, <span class="st">"pajek"</span>, <span class="st">"ncol"</span>, <span class="st">"lgl"</span>,</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"graphml"</span>, <span class="st">"dimacs"</span>, <span class="st">"graphdb"</span>, <span class="st">"gml"</span>, <span class="st">"dl"</span>), ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>(<em>I personally have encountered some issue when importing <code>graphml</code> files that were produced in <a href="https://visone.ethz.ch/html/about.html">visone</a>. Also <code>dl</code> files sometimes through an error.</em>)</p>
<p>If your network data is in one of the above formats you will find it easy to import your network.</p>
<p>If your data is not in a network file format, you will need one of the following functions to turn raw network data into an <code>igraph</code> object: <code>graph_from_edgelist()</code>, <code>graph_from_adjacency_matrix()</code>, <code>graph_from_adj_list()</code>, or <code>graph_from_data_frame()</code>.</p>
<p>Before using these functions, however, you still need to get the raw data into R. The concrete procedure depends on the file format. If your data is stored as an excel spreadsheet, you need additional packages. If you are familiar with the <code>tidyverse</code>, you can use the <code>readxl</code> package. Other options are, e.g.&nbsp;the <code>xlsx</code> package.</p>
<p>Most network data you’ll find is in a plain text format (csv or tsv), either as an edgelist or adjacency matrix. To read in such data, you can use base R’s <code>read.table()</code>.</p>
<p>Make sure you check the following before trying to load a file: Does it contain a header (e.g.&nbsp;row/column names of an adjacency matrix)? How are values delimited (comma, whitespace or tab)? This is important to set the parameters <code>header</code>, <code>sep</code> to read the data properly.</p>
<p>If you are struggling with this step, you can use the <code>Netreader</code> Rstudio add in which comes with the <code>snahelper</code> package</p>
<p><img src="Netreader1.png" class="img-fluid"> Using the <code>Netreader</code> should comes with a learning effect (hopefully). The last tab shows the R code to produce the network with the chosen data without using the Addin.</p>
<p><img src="Netreader2.png" class="img-fluid"></p>
<p>Since the addin is supposed to be very general, the code might look a bit awkward. The functions <code>graph_from_edgelist()</code> and <code>graph_from_adjacency_matrix()</code> come with a drawback. You can’t add node or edge attributes automatically.</p>
<p>In general, it is always a good idea to organize network data in two different data frames. One for the nodes (with attributes) and one for the edges (edgelist+attributes). This will save you a lot of pain when trying to convert the data into an igraph object. Especially if you want to go down the <a href="../tidynetanar/">tidy way</a> later.</p>
</section>
<section id="what-is-missing" class="level1">
<h1>What is missing?</h1>
<p>I have tried to cover as many of the available packages and tools to analyze networks in R as possible and will include more details (and packages) over time. What I will probably never cover though are packages related to network dynamics, such as <code>ergm</code> or <code>Rsiena</code>. These are just not my 🍵. For <code>ergm</code>, you can refer to this <a href="http://statnet.org/Workshops/ergm_tutorial.html">statnet tutorial</a> and for <code>Rsiena</code> you can check out the <a href="https://www.stats.ox.ac.uk/~snijders/siena/siena_scripts.htm">Rsiena webpage</a>.</p>
<hr>
</section>
<section id="further-reading" class="level1">
<h1>Further Reading</h1>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© 2022 David Schoch</div>   
      <div class="nav-footer-center">powered by <a href="https://quarto.org">quarto</a></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/schochastics">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/schochastics">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.de/citations?user=MFlgHdcAAAAJ&amp;hl=en"><i class="ai ai-google-scholar" role="img"></i></a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0000-0003-2952-4812"><i class="ai ai-orcid" role="img"></i></a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>